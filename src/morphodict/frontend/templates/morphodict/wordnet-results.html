{% spaceless %}
{% load morphodict_extras %}
{% load relabelling %}
    {% if verbose_messages %}
        <li class="search-results__result box">
            <h3>Messages from search run</h3>
            <pre>{{ verbose_messages }}</pre>
        </li>
    {% endif %}
    <div id="resultsContainer">
    {% for result in search_results %}
    {% with has_more=search_results|has_next:forloop.counter0 %}
    {% with has_previous=search_results|has_previous:forloop.counter0 %}
    
    <div class="synset" style="background-color: var(--menu-hover-bg-color); border: 4px solid var(--prose-title-color); border-radius:5px; padding: 10px; margin-left:10px; margin-right:10px; margin-top:.5cm; margin-bottom:.5cm;">
        <a name="result-synset-{{result.wn_entry.nltk_name}}"></a>
        <section class="prose box box--spaced">
            <h2 class="prose__section-title">{{result.wn_entry.numbering}}. {{result.wn_entry.original_str}} ({% relabel_one result.wn_entry.paren_pos %})</h2>
            <div class="meanings__meaning" data-cy="lemma-meaning">
              {{result.wn_entry.definition}} 
            {% include "morphodict/components/citations.html" with dictionary_sources=result.wn_entry.sources %}
            </div>
            {% if result.wn_entry.synonyms|length > 1 %}
            <p><strong>{% relabel_one 'Synonyms' %}</strong>:
            <em>{{result.wn_entry.synonyms|join:", "}}</em>.</p>
            {% endif %}
            <div style="display:flex; justify-content:flex-end;">
            {% if has_previous %}
            {% with previous_element=search_results|previous:forloop.counter0 %}
            <a href="#result-synset-{{previous_element.wn_entry.nltk_name}}" style="text-decoration:none;" data-bs-toggle="collapse" data-bs-target="#synset-results-{{previous_element.wn_entry.nltk_name}}" aria-expanded="false" aria-controls="synset-results-{{previous_element.wn_entry.nltk_name}}" style="text-align:right;">⏪</a>
            {% endwith %}
            {% endif %}
            <a href="#" class="expand-accordion" style="text-decoration:none;" data-bs-toggle="collapse" data-bs-target="#synset-results-{{result.wn_entry.nltk_name}}" aria-expanded="{%if forloop.counter0 == 0 %}true{%else%}false{%endif%}" aria-controls="synset-results-{{result.wn_entry.nltk_name}}"></a>
            {% if has_more %}
            {% with next_element=search_results|next:forloop.counter0 %}
            <a href="#result-synset-{{next_element.wn_entry.nltk_name}}" style="text-decoration:none;" data-bs-toggle="collapse" data-bs-target="#synset-results-{{next_element.wn_entry.nltk_name}}" aria-expanded="false" aria-controls="synset-results-{{next_element.wn_entry.nltk_name}}" style="text-align:right;">⏩</a>
            {% endwith %}
            {% endif %}
            </div>
          </section>
          
        <div id="synset-results-{{result.wn_entry.nltk_name}}" data-bs-parent="#resultsContainer" class="collapse {% if forloop.counter0 == 0 %}show{% endif %}">
            {% for result in result.results %}
            <li class="search-results__result" data-cy="search-results" style="padding-left: .5cm; padding-right: .5cm">
                {% include './components/search-result.html' with result=result %}
            </li>
            {% endfor %}
        </div>
    </div>
    {% endwith %}
    {% endwith %}
    {% empty %}
        <li class="search-results__no-result box box--rounded box--bad-outcome" data-cy="no-search-result">
            No results found for
            <output class="query">{{ query_string }}</output>
        </li>
    {% endfor %}
    </div>
    {# vim: set ft=htmldjango et sw=2 ts=2 sts=2: #}
{% endspaceless %}
