[[source]]
name = "pypi"
url = "https://pypi.org/simple"
verify_ssl = true

[dev-packages]
black = "==19.3b0"
pytest = "~=5.1"
pytest-django = "~=3.5"
pytest-cov = "~=2.7"
pytest-datadir = "~=1.3"
pytest-mypy = "~=0.4"
hypothesis = {extras = ["django"],version = "~=4.34"}
xml-subsetter = "~=0.0"
codecov = "*"
snakeviz = "~=2.0"
paramiko = "~=2.6"

[packages]
colorama = "~=0.4"
coverage = "~=4.5"
cree-sro-syllabics = "==2019.2.18"
hfstol = "~=1.2.2"
pytz = "==2019.2"
tqdm = "~=4.33"
Django = "~=2.2"
creedictionary = {editable = true,path = "./CreeDictionary"} # needed to install and use database manager
typing-extensions = "~=3.7"
attrs = "~=19.1"
django-js-reverse = "~=0.9"

[scripts]
# look stuff up
analyze = "hfst-optimized-lookup CreeDictionary/res/fst/crk-descriptive-analyzer.hfstol"
# tests
test = "pytest --mypy CreeDictionary/"
# run dev server
dev = "python CreeDictionary/manage.py runserver"
# format
format = "black CreeDictionary"
# Django stuff
make-migrations = "python ./CreeDictionary/manage.py makemigrations"
migrate = "python ./CreeDictionary/manage.py migrate"
collect-static = "python ./CreeDictionary/manage.py collectstatic --clear --no-input"
profile = "python -m profiling"
# reminders. you can just use $ manage-db
manage-db = "manage-db"
clear-db = "manage-db clear"
import-xml = "manage-db import"
# about permissions: db.sqlite3 file django generates has -rw-r--r--
# As long as the user on Sapir belongs to www-data group. www-data will be able to read the database
push-db = 'rsync --progress CreeDictionary/db.sqlite3 $SAPIR_USER@sapir.artsrn.ualberta.ca:/opt/cree-intelligent-dictionary/CreeDictionary/db.sqlite3'

[requires]
python_version = "3.6" # sapir uses python 3.6.9
