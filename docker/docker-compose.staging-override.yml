# WARNING: This file is autogenerated by make-yaml. Changes here
# will be overwritten. Edit the corresponding .template file
# instead.

# A docker-compose override file more amenable to local work
#
# Run with
#
#     docker-compose
#         -f docker-compose.yml \
#         -f docker-compose.staging-override-sample.yml \
#         up --build

version: "3"

services:
  crkeng:
    # In prod, we *always* want the apps running, including on boot; that’s
    # not necessarily the case on our dev machines.
    restart: "no"
    build:
      context: ..
      dockerfile: docker/Dockerfile
    # The tag that will automatically be applied on build:
    image: morphodict:dev

    volumes:
      - "./.env:/app/.env"
      - "../src/crkeng/resources/vector_models/:/app/src/crkeng/resources/vector_models/"
      - "../src/crkeng/db/:/app/src/crkeng/db/"
      - "../src/crkeng/CreeDictionary/search_quality/:/app/src/crkeng/CreeDictionary/search_quality/"

  cwdeng:
    # In prod, we *always* want the apps running, including on boot; that’s
    # not necessarily the case on our dev machines.
    restart: "no"
    build:
      context: ..
      dockerfile: docker/Dockerfile
    # The tag that will automatically be applied on build:
    image: morphodict:dev

    volumes:
      - "./.env:/app/.env"
      - "../src/cwdeng/resources/vector_models/:/app/src/cwdeng/resources/vector_models/"
      - "../src/cwdeng/db/:/app/src/cwdeng/db/"
      - "../src/cwdeng/CreeDictionary/search_quality/:/app/src/cwdeng/CreeDictionary/search_quality/"

  srseng:
    # In prod, we *always* want the apps running, including on boot; that’s
    # not necessarily the case on our dev machines.
    restart: "no"
    build:
      context: ..
      dockerfile: docker/Dockerfile
    # The tag that will automatically be applied on build:
    image: morphodict:dev

    volumes:
      - "./.env:/app/.env"
      - "../src/srseng/resources/vector_models/:/app/src/srseng/resources/vector_models/"
      - "../src/srseng/db/:/app/src/srseng/db/"
      - "../src/srseng/CreeDictionary/search_quality/:/app/src/srseng/CreeDictionary/search_quality/"

  arpeng:
    # In prod, we *always* want the apps running, including on boot; that’s
    # not necessarily the case on our dev machines.
    restart: "no"
    build:
      context: ..
      dockerfile: docker/Dockerfile
    # The tag that will automatically be applied on build:
    image: morphodict:dev

    volumes:
      - "./.env:/app/.env"
      - "../src/arpeng/resources/vector_models/:/app/src/arpeng/resources/vector_models/"
      - "../src/arpeng/db/:/app/src/arpeng/db/"
      - "../src/arpeng/CreeDictionary/search_quality/:/app/src/arpeng/CreeDictionary/search_quality/"

  hdneng:
    # In prod, we *always* want the apps running, including on boot; that’s
    # not necessarily the case on our dev machines.
    restart: "no"
    build:
      context: ..
      dockerfile: docker/Dockerfile
    # The tag that will automatically be applied on build:
    image: morphodict:dev

    volumes:
      - "./.env:/app/.env"
      - "../src/hdneng/resources/vector_models/:/app/src/hdneng/resources/vector_models/"
      - "../src/hdneng/db/:/app/src/hdneng/db/"
      - "../src/hdneng/CreeDictionary/search_quality/:/app/src/hdneng/CreeDictionary/search_quality/"

